# 单例模式

概念：采取一定的方法保证在整个系统中，对某个类只能存在一个对象实例，并且该类只能提供一个取得其对象实例的方法



单例模式8种写法

1. 饿汉式模式(静态常量)
2. 饿汉式模式(静态代码块)
3. 懒汉式模式(线程不安全)
4. 懒汉式模式(线程安全，同步方法)
5. 懒汉式模式(线程安全，同步代码块)
6. 双重检查
7. 静态内部类
8. 枚举

模式优缺点

1) 饿汉式模式

优点：写法简单，类装载时完成实例化，避免线程同步问题

缺点：类装载实例化，没有Lazy Loading的效果。如果类未使用，会造成内存浪费

1) 懒汉式模式
   
   线程不安全优缺点：起到了Lazy Loading效果，但是只能在单线程下使用。如果在多线程下，一个线程进入if (instance == null)判断语句，还未来的及往下执行，另一个线程也通过这个判断语句，这时候会产生多个实例。所以在多线程环境下不能用这个方式
   同步方法 线程安全优缺点: 用synchronized解决了线程安全问题，但是线程每次获取类实例的时候，都要去执行synchronized获得同步，效率比较低
   同步代码块 线程安全优缺点: 这种方法不能起到线程同步的作用，一个线程进入if (instance == null)判断语句，还未来的及往下执行，另一个线程也通过这个判断语句，这时候会产生多个实例。所以在多线程环境下不能用这个方式

2) 双重检查
   
    优缺点：两次if(instance == null)判断语句,保证线程安全，线程安全，延迟加载，效率较高

3) 静态内部类
   
   利用jvm类装载是线程安全机制，别的线程无法进入

4) 枚举
   
   优缺点：不仅能避免多线程同步问题。而且还能防止反序列化重新创建新的对象